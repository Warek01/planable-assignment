import{w as M}from"./with-props-Nl8GaAsT.js";import{n as e,a}from"./chunk-SYFQ2XB5-ePwPyWlc.js";import{M as p,u as v,b as l,q as E,y as F,i as S,C as N,f as j,z as k,r as L,A,B as G,E as R,F as z,g as B,G as D,H as P,I as f,v as h}from"./redux-D9f6bYtA.js";import{C as T,c as H,I as O,e as Z}from"./index-D4RdMiD_.js";import{a as $}from"./index-Gr51Cw-a.js";import{F as x}from"./index-HtxMOTJK.js";const q=t=>e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 2.875C3.15482 2.875 2.875 3.15482 2.875 3.5L2.875 8.5C2.875 8.84518 3.15482 9.125 3.5 9.125C3.84518 9.125 4.125 8.84518 4.125 8.5L4.125 4.125L8.5 4.125C8.84518 4.125 9.125 3.84518 9.125 3.5C9.125 3.15482 8.84518 2.875 8.5 2.875L3.5 2.875ZM13.125 7.5C13.125 7.15482 12.8452 6.875 12.5 6.875C12.1548 6.875 11.875 7.15482 11.875 7.5L11.875 11.875L7.5 11.875C7.15482 11.875 6.875 12.1548 6.875 12.5C6.875 12.8452 7.15482 13.125 7.5 13.125L12.5 13.125C12.8452 13.125 13.125 12.8452 13.125 12.5L13.125 7.5Z",fill:"white"})}),V=({onClose:t,item:s})=>{const n=a.useMemo(()=>{switch(s.type){case p.IMAGE:return e.jsx("img",{alt:s.name,src:s.url,className:"max-w-[90vw] max-h-[90vh] rounded-xl"});case p.VIDEO:case p.GIF:return e.jsx("video",{src:"/mock-video.mp4",className:"max-w-[90vw] max-h-[90vh] rounded-xl",controls:!0,autoPlay:!0,muted:!0})}},[s]);return e.jsx(W,{onClose:t,children:e.jsxs("div",{className:"flex items-center justify-center relative",children:[t&&e.jsx("button",{onClick:t,className:"absolute top-2 right-2 p-3 bg-white/10 hover:bg-white/30 rounded-full transition cursor-pointer z-50",children:e.jsx(T,{color:"white"})}),n]})})},J=({item:t})=>{const s=v(),n=l(E),[r,i]=a.useState(!1),{listeners:o,setNodeRef:c,transform:g,isDragging:I}=F({id:t.id}),u=a.useMemo(()=>n.findIndex(m=>m===t.id),[n,t.id]),d=u!==-1,w=()=>{i(!0)},b=()=>{const m=u===-1?k({itemId:t.id}):L({itemId:t.id});s(m)},y=a.useMemo(()=>e.jsx("div",{className:`absolute opacity-0 group-hover:opacity-100 duration-100 left-1 top-1 cursor-pointer w-4 h-4
            flex items-center justify-center`,onClick:w,children:e.jsx(q,{})}),[]),C=a.useMemo(()=>e.jsx("div",{className:H("absolute left-1 bottom-1 cursor-pointer w-5 h-5 rounded-md flex items-center justify-center","transition-[background] duration-100",d?"border-primary bg-primary":"group-hover:border-[1.5px] group-hover:border-white"),onClick:b,children:e.jsx(S,{size:"1",className:"text-white",children:d?u+1:""})}),[d,u]);return e.jsxs("div",{className:"w-full",style:{position:"relative",transform:N.Translate.toString(g),zIndex:I?1e3:"auto"},children:[e.jsxs(j,{position:"relative",className:"group",children:[e.jsx(O,{item:t,listeners:o,setNodeRef:c,isSelected:d}),y,C,r&&e.jsx(V,{item:t,onClose:()=>i(!1)})]}),e.jsx(Z,{item:t,isSelected:d})]})},K=(t,s)=>{const{type:n,name:r,folder:i}=s;let o=t.concat();return i&&(o=o.filter(c=>i.itemIds.includes(c.id))),n&&(o=o.filter(c=>n.includes(c.type))),r&&(o=o.filter(c=>c.name.includes(r))),o},Q=({folder:t})=>{const s=l(A),n=l(G),r=l(R),i=a.useMemo(()=>K(s,{folder:t,type:n,name:r}),[t,s,n,r]);return e.jsx(z,{columns:{sm:"3",md:"4",lg:"5",xl:"6"},gap:"4",p:"2",align:"center",justify:"center",children:i.map(o=>e.jsx(B,{justify:"center",p:"1",children:e.jsx(J,{item:o})},o.id))})},U=({children:t})=>$.createPortal(t,document.body),W=({children:t,onClose:s,open:n=!0})=>{const r=a.useRef(null),i=o=>{o.target===r.current&&(s==null||s())};return a.useEffect(()=>(n&&document.body.classList.add("overflow-hidden"),()=>{document.body.classList.remove("overflow-hidden")}),[n]),e.jsx(U,{children:e.jsx("div",{ref:r,className:`absolute flex items-center justify-center w-screen h-[100vh] max-w-screen max-h-[100vh]
            bg-black/50 cursor-default z-50 top-0 left-0`,onClick:i,children:t})})},X=({params:t})=>{const{folderId:s}=t,n=l(D),r=l(c=>P(c,s)),i=v();a.useEffect(()=>(i(f({folderId:r==null?void 0:r.id})),i(h()),()=>{i(f({folderId:void 0})),i(h())}),[s,n]);const o=a.useMemo(()=>r?r.itemIds.length?e.jsx(Q,{folder:r}):e.jsx(x,{title:"This folder is empty",subtitle:"Add images, videos and GIFs."}):e.jsx(x,{title:"404 Folder not found"}),[r]);return e.jsx(j,{width:"100%",minHeight:"100%",position:"relative",children:o})},oe=M(X);export{oe as default};
